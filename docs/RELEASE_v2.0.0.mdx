{/*
  Release Notes v2.0.0 | ç‰ˆæœ¬å‘å¸ƒè¯´æ˜ v2.0.0
  
  ä¸­æ–‡ç‰ˆæœ¬åœ¨å‰ï¼Œè‹±æ–‡ç‰ˆæœ¬åœ¨å
  Chinese version first, English version second
*/}

# Release v2.0.0 - åŒ»æ‚£äº’è”ç‰ˆæœ¬

## ğŸ¯ æäº¤ä¿¡æ¯ Commit Message

```
Release v2.0.0: å®Œæ•´åŒ»æ‚£æ²Ÿé€šä¸ç®¡ç†å‘˜ç³»ç»Ÿ / Complete Patient-Doctor Communication & Admin System

ä¸»è¦åŠŸèƒ½ Major Features:
- åŒ»æ‚£åŒå‘æ²Ÿé€šç³»ç»Ÿï¼Œæ”¯æŒ @åŒ»ç”ŸæåŠ / Bidirectional patient-doctor communication with @mentions
- å®æ—¶ç³»ç»Ÿç›‘æ§ï¼Œé›†æˆ psutil / Real-time system monitoring with psutil integration
- @æˆ‘çš„ç—…ä¾‹æ—¶é—´ç­›é€‰ï¼ˆä»Šæ—¥/ä¸‰å¤©å†…/ä¸€å‘¨å†…ï¼‰/ Time-based filtering for @mentions (Today, 3 days, 1 week)
- åŒ»ç”Ÿè®¤è¯å·¥ä½œæµï¼Œç®¡ç†å‘˜å®¡æ ¸ / Doctor verification workflow with admin approval
- æ‚£è€…å›å¤åŒ»ç”Ÿè¯„è®ºåŠŸèƒ½ / Patient reply system for doctor comments
- éšç§æ§åˆ¶ï¼šåŒ»ç”Ÿä»…æŸ¥çœ‹è‡ªå·±ç›¸å…³è®¨è®º / Privacy controls: doctors only see their own thread

Bug ä¿®å¤ Bug Fixes:
- ä¿®å¤åŒ»ç”Ÿæœç´¢ä¸æ˜¾ç¤ºå·²è®¤è¯åŒ»ç”Ÿï¼ˆis_verified å­—æ®µåŒæ­¥ï¼‰/ Fixed doctor search not showing verified doctors
- ä¿®å¤ç®¡ç†å‘˜å®¡æ ¸æœªè®¾ç½® is_verified æ ‡å¿— / Fixed admin approval not setting is_verified flag
- ä¿®å¤æ‚£è€…å›å¤æšä¸¾ç±»å‹ï¼ˆreply_statusï¼‰/ Fixed patient reply enum type
- ä¿®å¤ç®¡ç†å‘˜æ“ä½œæ—¥å¿—æšä¸¾å€¼ / Fixed admin operation logs enum values
- ä¿®å¤åç«¯æ¨¡å‹å…³ç³»é‡å¯é—®é¢˜ / Fixed backend restart issues with model relationships
- ä¿®å¤ docker-compose postgres/redis é‡å¯ç­–ç•¥ / Fixed docker-compose restart policy
- ä¿®å¤å‰ç«¯æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®è€ŒéçœŸå®ç³»ç»ŸæŒ‡æ ‡ / Fixed frontend showing mock data instead of real metrics

åŸºç¡€è®¾æ–½ Infrastructure:
- postgres å’Œ redis æœåŠ¡æ·»åŠ  restart: always / Added restart: always to postgres and redis services
- åˆ›å»ºåŒ»ç”Ÿè®¤è¯åŒæ­¥ç«¯ç‚¹ / Created doctor verification sync endpoint
- æ›´æ–°æ¨¡å‹å’Œæ•°æ®åº“ä¸­çš„ admin_operation_type æšä¸¾ / Updated admin_operation_type enum
- ä¿®å¤ CaseCommentReply æ¨¡å‹å…³ç³» / Fixed CaseCommentReply model relationships

å®‰å…¨ Security:
- åŒ»ç”Ÿåªèƒ½æŸ¥çœ‹è‡ªå·±çš„è¯„è®ºå’Œæ‚£è€…å›å¤ / Doctors can only view their own comments and patient replies
- æ‚£è€…å¯æŸ¥çœ‹æ‰€æœ‰åŒ»ç”Ÿè¯„è®ºä½†åªèƒ½æŸ¥çœ‹è‡ªå·±çš„å›å¤ / Patients see all doctor comments but only their own replies
- æ‰€æœ‰åŒ»ç”Ÿæœç´¢éƒ½éœ€è¦è®¤è¯çŠ¶æ€éªŒè¯ / All doctor searches require verification status

æ•°æ®åº“ Database:
- æ–°è¡¨ï¼šcase_comment_repliesï¼ˆæ‚£è€…å›å¤åŒ»ç”Ÿï¼‰/ New table: case_comment_replies
- æ–°æšä¸¾ï¼šreply_statusï¼ˆactive, hiddenï¼‰/ New enum: reply_status
- æ›´æ–°æšä¸¾ï¼šadmin_operation_typeï¼ˆæ·»åŠ  sync_doctor_verificationï¼‰/ Updated enum: admin_operation_type
- ä¿®å¤ case_comment_replies çŠ¶æ€åˆ—ç±»å‹ / Fixed column type for status

å‰ç«¯æ›´æ–° Frontend Updates:
- symptom-submit.html æ·»åŠ  @åŒ»ç”Ÿ UI / Added @doctor UI in symptom-submit.html
- doctor-mentions.html æ·»åŠ æ—¶é—´ç­›é€‰ä¸‹æ‹‰æ¡† / Added time filter dropdown in doctor-mentions.html
- medical-records.html æ·»åŠ æ‚£è€…å›å¤ç•Œé¢ / Added patient reply interface in medical-records.html
- ä¿®å¤ admin-dashboard æ˜¾ç¤ºçœŸå®ç³»ç»ŸæŒ‡æ ‡ / Fixed admin-dashboard to show real system metrics
- doctor-case-detail.html æ˜¾ç¤ºæ‚£è€…å›å¤ / Updated doctor-case-detail.html to show patient replies

API å˜æ›´ API Changes:
- POST /api/v1/medical-cases/{id}/doctor-comments/{cid}/reply
- GET /api/v1/medical-cases/{id}/doctor-commentsï¼ˆåŒ…å«å›å¤ï¼‰/ (includes replies)
- POST /api/v1/admin/doctors/sync-verification
- æ›´æ–° GET /api/v1/doctor/cases ä»…ç­›é€‰å½“å‰åŒ»ç”Ÿå¯è®¿é—®ç—…ä¾‹ / Filter to show ONLY current doctor's accessible cases
```

---

# Release v2.0.0 - Connected Care Edition

## ğŸ“‹ Complete Feature List | å®Œæ•´åŠŸèƒ½åˆ—è¡¨

### âœ¨ New Features | æ–°å¢åŠŸèƒ½

#### 1. Patient-Doctor Communication System | åŒ»æ‚£æ²Ÿé€šç³»ç»Ÿ

**Chinese:**
- **ç—‡çŠ¶æäº¤æ—¶ @åŒ»ç”ŸæåŠ**
  - å®æ—¶åŒ»ç”Ÿæœç´¢ï¼Œæ”¯æŒåŒ»é™¢/ç§‘å®¤/ä¸“ä¸šç­›é€‰
  - æ˜¾ç¤ºåŒ¿ååŒ–åŒ»ç”Ÿåç§°ï¼ˆå¦‚"å¼ åŒ»ç”Ÿ"ï¼‰ä¿æŠ¤éšç§
  - ä»…å·²è®¤è¯åŒ»ç”Ÿå‡ºç°åœ¨æœç´¢ç»“æœ
  - åŒ»ç”Ÿé€šè¿‡"@æˆ‘çš„"é¡µé¢æ¥æ”¶é€šçŸ¥

- **åŒå‘æ¶ˆæ¯ç³»ç»Ÿ**
  - åŒ»ç”Ÿå¯åœ¨å…±äº«ç—…ä¾‹ä¸Šæ·»åŠ ä¸“ä¸šè¯„è®º
  - æ‚£è€…å¯å›å¤ç‰¹å®šåŒ»ç”Ÿçš„è¯„è®º
  - åŸºäºåŒ»ç”Ÿ-æ‚£è€…å¯¹çš„çº¿ç¨‹å¼å¯¹è¯
  - è¯„è®ºç±»å‹ï¼šå»ºè®®ã€è¯Šæ–­æ„è§ã€æ²»ç–—å»ºè®®ã€ä¸€èˆ¬

- **éšç§æ§åˆ¶**
  - åŒ»ç”Ÿ**åªèƒ½**æŸ¥çœ‹è‡ªå·±çš„è¯„è®ºå’Œæ‚£è€…å›å¤
  - åŒ»ç”Ÿ**æ— æ³•**æŸ¥çœ‹å…¶ä»–åŒ»ç”Ÿçš„è¯„è®ºæˆ–æ‚£è€…å¯¹å…¶ä»–åŒ»ç”Ÿçš„å›å¤
  - æ‚£è€…å¯æŸ¥çœ‹æ‰€æœ‰åŒ»ç”Ÿè¯„è®ºä½†åªèƒ½æŸ¥çœ‹è‡ªå·±çš„å›å¤
  - è¯„è®ºå¯è§æ€§åœ¨æ•°æ®åº“æŸ¥è¯¢çº§åˆ«æ§åˆ¶

**English:**
- **@Doctor Mention in Symptom Submission**
  - Real-time doctor search with hospital/department/specialty filters
  - Shows anonymized doctor names (e.g., "Dr. Zhang") for privacy
  - Only verified doctors appear in search results
  - Doctor receives notification via "@My" page

- **Bidirectional Messaging**
  - Doctors can add professional comments on shared cases
  - Patients can reply to specific doctor comments
  - Thread-based conversation per doctor-patient pair
  - Comment types: suggestion, diagnosis_opinion, treatment_advice, general

- **Privacy Controls**
  - Doctors can ONLY see their own comments and patient replies to them
  - Doctors CANNOT see other doctors' comments or patient replies to others
  - Patients see all doctor comments but only their own replies
  - Comment visibility controlled at database query level

#### 2. Time-Based Filtering | æ—¶é—´ç­›é€‰åŠŸèƒ½

**Chinese:**
- **åŒ»ç”Ÿå¹³å°ï¼š@æˆ‘çš„ç—…ä¾‹ ç­›é€‰**
  - "ä»Šæ—¥" - ä»…ä»Šæ—¥ç—…ä¾‹
  - "ä¸‰å¤©å†…" - æœ€è¿‘3å¤©ç—…ä¾‹
  - "ä¸€å‘¨å†…" - æœ€è¿‘7å¤©ç—…ä¾‹
  - "å…¨éƒ¨æ—¶é—´" - æ‰€æœ‰å†å²ç—…ä¾‹
  - å®¢æˆ·ç«¯ JavaScript å®æ—¶ç­›é€‰

**English:**
- **Doctor Platform: @My Cases Filter**
  - "Today" - Cases from today only
  - "3 Days" - Cases from last 3 days
  - "1 Week" - Cases from last 7 days
  - "All Time" - All historical cases
  - Real-time filtering with client-side JavaScript

#### 3. Real System Monitoring | çœŸå®ç³»ç»Ÿç›‘æ§

**Chinese:**
- **CPU/å†…å­˜/ç£ç›˜ä½¿ç”¨ç‡**
  - ä½¿ç”¨ `psutil` åº“è·å–çœŸå®ç³»ç»ŸæŒ‡æ ‡
  - ç®¡ç†åå°æ¯30ç§’æ›´æ–°
  - å½©è‰²è¿›åº¦æ¡ï¼ˆç»¿è‰² < 60%ï¼Œé»„è‰² 60-80%ï¼Œçº¢è‰² > 80%ï¼‰
  - ç§»é™¤æ‰€æœ‰æ¨¡æ‹Ÿ/è™šå‡æ•°æ®å›é€€

**English:**
- **CPU/Memory/Disk Usage**
  - Uses `psutil` library for actual system metrics
  - Updates every 30 seconds on admin dashboard
  - Color-coded progress bars (green < 60%, yellow 60-80%, red > 80%)
  - Removed all mock/fake data fallbacks

#### 4. Admin Verification Workflow | ç®¡ç†å‘˜è®¤è¯å·¥ä½œæµ

**Chinese:**
- **åŒ»ç”Ÿå®¡æ‰¹æµç¨‹**
  - ç®¡ç†å‘˜å®¡æ ¸åŒ»ç”Ÿæ³¨å†Œå’Œæ‰§ä¸šè¯
  - å®¡æ‰¹åŒæ—¶è®¾ç½® `is_verified_doctor` å’Œ `is_verified` æ ‡å¿—
  - åŒæ­¥ç«¯ç‚¹ä¿®å¤æ—§æ•°æ®ç¼ºå¤± `is_verified` çš„é—®é¢˜
  - æ‰€æœ‰æ‰¹å‡†/æ‹’ç»æ“ä½œéƒ½æœ‰å®¡è®¡æ—¥å¿—

**English:**
- **Doctor Approval Process**
  - Admin reviews doctor registration with license verification
  - Approval sets both `is_verified_doctor` AND `is_verified` flags
  - Sync endpoint to fix legacy approved doctors missing `is_verified`
  - Audit logging for all approval/rejection actions

---

### ğŸ”§ Bug Fixes | é—®é¢˜ä¿®å¤

#### Critical Bug: Doctor Search Not Working | ä¸¥é‡é—®é¢˜ï¼šåŒ»ç”Ÿæœç´¢ä¸å·¥ä½œ

**Chinese:**
**é—®é¢˜**ï¼šå®¡æ‰¹å‰ä»£ç ä¿®å¤çš„åŒ»ç”Ÿæœ‰ `is_verified_doctor = true` ä½† `is_verified = false`

**æ ¹æœ¬åŸå› **ï¼š
- åŸä»£ç å®¡æ‰¹æ—¶åªè®¾ç½®äº† `is_verified_doctor = True`
- æ‚£è€…æœç´¢ API è¿‡æ»¤æ¡ä»¶æ˜¯ `User.is_verified == True`
- ä¸¤ä¸ªå­—æ®µæ•°æ®ä¸ä¸€è‡´

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä¿®å¤å®¡æ‰¹ç«¯ç‚¹åŒæ—¶è®¾ç½®ä¸¤ä¸ªå­—æ®µ
- åˆ›å»ºåŒæ­¥ç«¯ç‚¹ï¼š`POST /api/v1/admin/doctors/sync-verification`
- æ·»åŠ æ•°æ®åº“æŸ¥è¯¢è‡ªåŠ¨ä¿®å¤æ—§æ•°æ®

**English:**
**Issue**: Doctors approved before code fix had `is_verified_doctor = true` but `is_verified = false`

**Root Cause**:
- Original code only set `is_verified_doctor = True` on approval
- Patient search API filters by `User.is_verified == True`
- Data inconsistency between two fields

**Solution**:
- Fixed approval endpoints to set BOTH fields
- Created sync endpoint: `POST /api/v1/admin/doctors/sync-verification`
- Added database query to auto-fix legacy data

#### Database Enum Issues | æ•°æ®åº“æšä¸¾é—®é¢˜

**Fixed | å·²ä¿®å¤**ï¼š
- `reply_status` æšä¸¾æœªä¸º `case_comment_replies` è¡¨åˆ›å»º
- `admin_operation_type` æšä¸¾ç¼ºå°‘ `delete_knowledge_document`
- `admin_operation_type` æšä¸¾ç¼ºå°‘ `sync_doctor_verification`
- æ›´æ–° SQLAlchemy æ¨¡å‹æšä¸¾åŒ¹é… PostgreSQL

#### Docker Configuration | Docker é…ç½®

**Fixed | å·²ä¿®å¤**ï¼š
- postgres æœåŠ¡æ·»åŠ  `restart: always`
- redis æœåŠ¡æ·»åŠ  `restart: always`
- é˜²æ­¢å®¹å™¨åœ¨ç³»ç»Ÿé‡å¯ååœæ­¢
- æ‰€æœ‰æœåŠ¡ç°åœ¨ç³»ç»Ÿé‡å¯åè‡ªåŠ¨é‡å¯

#### Frontend Issues | å‰ç«¯é—®é¢˜

**Fixed | å·²ä¿®å¤**ï¼š
- ç§»é™¤ admin-dashboard ä¸­çš„ç¡¬ç¼–ç æ¨¡æ‹Ÿæ•°æ®å›é€€
- æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†æ›¿ä»£è™šå‡æ•°æ®
- ä¿®å¤ API è¿”å›æ•°æ®æ—¶åŒ»ç”Ÿæœç´¢æ˜¾ç¤º"0 ç»“æœ"

---

### ğŸ“Š Database Schema Changes | æ•°æ®åº“æ¶æ„å˜æ›´

#### New Table: `case_comment_replies` | æ–°è¡¨

```sql
CREATE TABLE case_comment_replies (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    doctor_comment_id UUID NOT NULL REFERENCES doctor_case_comments(id),
    patient_id UUID NOT NULL REFERENCES users(id),
    shared_case_id UUID NOT NULL REFERENCES shared_medical_cases(id),
    content TEXT NOT NULL,
    status reply_status DEFAULT 'active',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE
);
```

#### Updated Enums | æ›´æ–°æšä¸¾

```sql
-- New enum type | æ–°æšä¸¾ç±»å‹
CREATE TYPE reply_status AS ENUM ('active', 'hidden');

-- Updated admin_operation_type | æ›´æ–° admin_operation_type
ALTER TYPE admin_operation_type ADD VALUE 'delete_knowledge_document';
ALTER TYPE admin_operation_type ADD VALUE 'sync_doctor_verification';
```

#### Updated Relationships | æ›´æ–°å…³ç³»

- `DoctorCaseComment.patient_replies` - ä¸ CaseCommentReply ä¸€å¯¹å¤š
- `User.patient_replies` - ä¸ CaseCommentReply ä¸€å¯¹å¤šï¼ˆä½œä¸ºæ‚£è€…ï¼‰

---

### ğŸ”Œ API Changes | API å˜æ›´

#### New Endpoints | æ–°ç«¯ç‚¹

```
POST /api/v1/medical-cases/{case_id}/doctor-comments/{comment_id}/reply
  - æ‚£è€…å›å¤åŒ»ç”Ÿè¯„è®º / Patient replies to a doctor's comment
  - Body: { "content": "string" }
  - Returns: { id, content, created_at, status }

GET /api/v1/medical-cases/{case_id}/doctor-comments
  - è¿”å›åŒ»ç”Ÿè¯„è®ºå’Œ patient_replies æ•°ç»„ / Returns doctor comments with patient_replies array
  - æ‚£è€…æŸ¥çœ‹æ‰€æœ‰åŒ»ç”Ÿè¯„è®ºå’Œè‡ªå·±çš„å›å¤ / Patient sees all doctors' comments and their own replies

POST /api/v1/admin/doctors/sync-verification
  - åŒæ­¥æ‰€æœ‰å·²å®¡æ‰¹åŒ»ç”Ÿçš„ is_verified å­—æ®µ / Syncs is_verified field for all approved doctors
  - ä¿®å¤æ—§æ•°æ®ä¸ä¸€è‡´ / Fixes legacy data inconsistency
  - Returns: { synced_count, doctors: [...] }
```

#### Modified Endpoints | ä¿®æ”¹ç«¯ç‚¹

```
GET /api/v1/sharing/doctors?q={query}
  - ç°åœ¨éœ€è¦ User.is_verified == True / Now requires User.is_verified == True
  - è¿”å› display_name ä¸ºåŒ¿ååŒ– "XåŒ»ç”Ÿ" / Returns display_name as anonymized "Dr. X"

GET /api/v1/doctor/cases?type=mentioned
  - ç°åœ¨è¿‡æ»¤ä¸ºä»…æ˜¾ç¤ºå½“å‰åŒ»ç”Ÿå¯è®¿é—®ç—…ä¾‹ / Now filters to show ONLY current doctor's accessible cases
  - éšç§ï¼šæ— æ³•æŸ¥çœ‹æåŠç»™å…¶ä»–åŒ»ç”Ÿçš„ç—…ä¾‹ / Privacy: Cannot see cases mentioned to other doctors

GET /api/v1/admin/dashboard/summary
  - è¿”å› psutil çš„çœŸå®ç³»ç»ŸæŒ‡æ ‡ / Returns REAL system metrics from psutil
  - CPUã€å†…å­˜ã€ç£ç›˜ç™¾åˆ†æ¯”ä¸ºå®é™…å€¼ / CPU, Memory, Disk percentages are actual values
  - ç§»é™¤æ¨¡æ‹Ÿæ•°æ® / Removed mock data
```

---

### ğŸ¨ Frontend Changes | å‰ç«¯å˜æ›´

#### symptom-submit.html
- æ·»åŠ  "@æåŠåŒ»ç”Ÿï¼ˆå¯é€‰ï¼‰" éƒ¨åˆ† / Added "@Mention Doctor (Optional)" section
- å®æ—¶å»ºè®®çš„åŒ»ç”Ÿæœç´¢è¾“å…¥ / Doctor search input with real-time suggestions
- æ˜¾ç¤ºåŒ»é™¢/ç§‘å®¤/ä¸“ä¸šçš„åŒ»ç”Ÿå¡ç‰‡ / Shows doctor cards with hospital/department/specialty
- éšè—è¾“å…¥å­˜å‚¨é€‰ä¸­çš„ doctor_id / Hidden input stores selected doctor_id
- å‘é€ doctor_id åˆ° AI è¯Šæ–­ API / Sends doctor_id to AI diagnosis API

#### medical-records.html
- æ›´æ–°åŒ»ç”Ÿè¯„è®ºéƒ¨åˆ†æ˜¾ç¤ºæ‚£è€…å›å¤ / Updated doctor comments section to show patient replies
- ä¸ºæ¯ä¸ªåŒ»ç”Ÿè¯„è®ºæ·»åŠ å›å¤è¡¨å• / Added reply form for each doctor comment
- çº¿ç¨‹å¼æ˜¾ç¤ºå¸¦ç¼©è¿› / Thread-style display with indentation
- "ğŸ™‹ æˆ‘çš„å›å¤" æ ‡ç­¾ç”¨äºæ‚£è€…æ¶ˆæ¯ / "ğŸ™‹ My Reply" label for patient messages

#### doctor-mentions.html
- æ·»åŠ æ—¶é—´ç­›é€‰ä¸‹æ‹‰æ¡†ï¼ˆä»Šæ—¥/ä¸‰å¤©å†…/ä¸€å‘¨å†…/å…¨éƒ¨ï¼‰/ Added time filter dropdown
- æ— é¡µé¢é‡è½½çš„å®æ—¶ç­›é€‰ / Real-time filtering without page reload
- æ˜¾ç¤ºæ‰€é€‰æ—¶é—´æ®µç—…ä¾‹æ•° / Shows case count for selected time period
- ç©ºçŠ¶æ€ï¼š"è¯¥æ—¶é—´æ®µæš‚æ— ç—…ä¾‹" / Empty state: "No cases in this time period"

#### doctor-case-detail.html
- åœ¨åŒ»ç”Ÿè¯„è®ºä¸‹æ˜¾ç¤ºæ‚£è€…å›å¤ / Shows patient replies under doctor's comments
- æ‚£è€…å›å¤ç»¿è‰²å·¦è¾¹æ¡† / Green left border for patient replies
- å›å¤æ—¶é—´æˆ³æ ¼å¼åŒ– / Reply timestamp formatting
- åŒ»ç”Ÿåªè¯»è§†å›¾ / Read-only view for doctors

#### admin-dashboard.html
- ç§»é™¤æ‰€æœ‰æ¨¡æ‹Ÿæ•°æ®å›é€€ / Removed all mock data fallbacks
- æ˜¾ç¤º "åŠ è½½ä¸­..." æˆ–é”™è¯¯æ¶ˆæ¯ / Shows "Loading..." or error message
- æ¥è‡ª psutil çš„çœŸå® CPU/å†…å­˜/ç£ç›˜ / Real CPU/Memory/Disk from psutil
- 30ç§’è‡ªåŠ¨åˆ·æ–° / 30-second auto-refresh

---

### ğŸ³ Docker & Deployment | Docker ä¸éƒ¨ç½²

#### docker-compose.yml Changes | å˜æ›´

```yaml
postgres:
  restart: always  # å·²æ·»åŠ  / Added

redis:
  restart: always  # å·²æ·»åŠ  / Added
```

#### Environment Variables | ç¯å¢ƒå˜é‡

æ— æ–°å¿…éœ€å˜é‡ã€‚ç°æœ‰å˜é‡ï¼š
No new required variables. Existing:
- `JWT_SECRET_KEY` - ä»¤ç‰Œç”Ÿæˆ / For token generation
- `AI_API_KEY` - AI æ¨¡å‹è®¿é—® / For AI model access
- `MINERU_TOKEN` - æ–‡æ¡£æå– / For document extraction
- `REDIS_PASSWORD` - ç¼“å­˜å®‰å…¨ / For cache security

---

### ğŸ“ Installation | å®‰è£…

**Chinese:**
1. å…‹éš†ä»“åº“ / Clone repository
2. å¤åˆ¶ `.env.example` åˆ° `.env` å¹¶é…ç½® / Copy and configure
3. è¿è¡Œ `install.sh`ï¼ˆæ”¯æŒ 7 ä¸ª Linux å‘è¡Œç‰ˆï¼‰/ Run install.sh
4. è®¿é—®å¹³å°ï¼š
   - æ‚£è€…ç«¯ / Patient: http://localhost
   - åŒ»ç”Ÿç«¯ / Doctor: http://localhost:8081
   - ç®¡ç†å‘˜ / Admin: http://localhostï¼ˆéœ€è¦ç®¡ç†å‘˜è§’è‰²ï¼‰

**English:**
1. Clone repository
2. Copy `.env.example` to `.env` and configure
3. Run `install.sh` (supports 7 Linux distributions)
4. Access platforms:
   - Patient: http://localhost
   - Doctor: http://localhost:8081
   - Admin: http://localhost (admin role required)

---

### ğŸ” Security Considerations | å®‰å…¨è€ƒè™‘

- æ‰€æœ‰åŒ»ç”Ÿæœç´¢éƒ½æŒ‰ `is_verified = true` è¿‡æ»¤ / All doctor searches filtered by verification
- æ‚£è€…å›å¤æŒ‰åŒ»ç”Ÿçº¿ç¨‹éš”ç¦» / Patient replies isolated per doctor thread
- åŒ»ç”Ÿè¯„è®ºä»…å¯¹æˆæƒæ–¹å¯è§ / Doctor comments only visible to authorized parties
- ç®¡ç†å‘˜æ“ä½œå®Œå…¨å®¡è®¡ / Admin actions fully audited
- æ•æ„Ÿæ•°æ®æ’é™¤åœ¨ Git å¤–ï¼ˆAPI å¯†é’¥ã€å¯†ç ï¼‰/ Sensitive data excluded from Git

---

### ğŸ“ˆ Performance | æ€§èƒ½

- åŒ»ç”Ÿæœç´¢ï¼š< 100msï¼ˆ10k åŒ»ç”Ÿï¼‰/ Doctor search: < 100ms with 10k doctors
- ç³»ç»ŸæŒ‡æ ‡ï¼šé€šè¿‡ psutil å®æ—¶è·å– / System metrics: Real-time via psutil
- æ‚£è€…å›å¤ï¼šéšè¯„è®ºåŠ è½½ï¼ˆé¢„å…ˆåŠ è½½ï¼‰/ Patient replies: Loaded with comments
- è‡ªåŠ¨åˆ·æ–°ï¼šåå° 30ç§’é—´éš” / Auto-refresh: 30s interval for dashboard

---

### ğŸ› Known Issues (Fixed in v2.0.0) | å·²çŸ¥é—®é¢˜ï¼ˆv2.0.0 å·²ä¿®å¤ï¼‰

1. âœ… åŒ»ç”Ÿæœç´¢è¿”å› 0 ç»“æœ - å·²ä¿®å¤ / Doctor search returns 0 results - FIXED
2. âœ… æ‚£è€…å›å¤è¿”å› 500 é”™è¯¯ - å·²ä¿®å¤ï¼ˆæšä¸¾ç±»å‹ï¼‰/ Patient replies fail - FIXED
3. âœ… ç®¡ç†å‘˜æ—¥å¿—æšä¸¾é”™è¯¯ - å·²ä¿®å¤ï¼ˆæ·»åŠ å€¼ï¼‰/ Admin logs enum error - FIXED
4. âœ… ç³»ç»Ÿæ˜¾ç¤ºå‡æŒ‡æ ‡ - å·²ä¿®å¤ï¼ˆç§»é™¤æ¨¡æ‹Ÿæ•°æ®ï¼‰/ System shows fake metrics - FIXED
5. âœ… æœåŠ¡é‡å¯åä¸å¯åŠ¨ - å·²ä¿®å¤ï¼ˆé‡å¯ç­–ç•¥ï¼‰/ Services don't restart - FIXED

---

### ğŸ¯ Testing Checklist | æµ‹è¯•æ¸…å•

- [ ] æ³¨å†Œä¸ºæ‚£è€…ï¼Œæœç´¢ @åŒ»ç”Ÿ / Register as patient, search for @doctor
- [ ] åŒ»ç”Ÿé€šè¿‡ç®¡ç†å‘˜å®¡æ‰¹ï¼Œå‡ºç°åœ¨æœç´¢ä¸­ / Doctor approves via admin, appears in search
- [ ] æ‚£è€… @åŒ»ç”Ÿï¼ŒåŒ»ç”Ÿåœ¨"@æˆ‘çš„"ä¸­çœ‹åˆ° / Patient @doctor, doctor sees in "@My"
- [ ] åŒ»ç”Ÿè¯„è®ºç—…ä¾‹ / Doctor comments on case
- [ ] æ‚£è€…å›å¤è¯„è®º / Patient replies to comment
- [ ] åŒ»ç”Ÿçœ‹åˆ°æ‚£è€…å›å¤ / Doctor sees patient reply
- [ ] å…¶ä»–åŒ»ç”Ÿæ— æ³•æŸ¥çœ‹è¯¥çº¿ç¨‹ / Other doctor cannot see the thread
- [ ] ç®¡ç†å‘˜åå°æ˜¾ç¤ºçœŸå® CPU/å†…å­˜/ç£ç›˜ / Admin dashboard shows real metrics
- [ ] æŒ‰æ—¶é—´æ®µç­›é€‰ @æˆ‘çš„ / Filter @My by time period
- [ ] ç³»ç»Ÿé‡å¯åæ‰€æœ‰æœåŠ¡å¯åŠ¨ / All services restart after OS reboot

---

**Version**: 2.0.0
**Date**: 2026-02-09
**Codename**: "Connected Care" | "åŒ»æ‚£äº’è”"
**Author**: è‹ä¸šé’¦ (Su Yeqin)
**License**: MIT
